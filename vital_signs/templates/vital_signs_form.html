{% extends "base.html" %}
{% block title %}Registrar Signos Vitales{% endblock title %}
{% block content %}
<div class="container">
    <div class="col-1">
        <a href="{% url "vital_signs:index" %}" class="btn btn-sm btn-outline-secondary d-flex justify-content-center align-items-center mb-4">
            <i class='bx bx-undo bx-sm'></i>
            <span class="fw-bold">Inicio</span>
        </a>
    </div>
    <div class="card pb-4">
        <div class="card-body">
            <form method="post">
                {% csrf_token %}
                <div class="col-lg-3 col-md-5 mx-auto mb-4 mt-3">
                    <label for="" class="form-label d-flex justify-content-center fw-bold">Eliga un Paciente: <span class="text-danger">*</span></label>
                    {{ form.patient }}
                </div>
                <div class="row g-0 align-items-center justify-content-center mb-4">
                    <div class="col-lg-1 col-md-6 col-sm-12 col-xs-12 me-0">
                        <label for="" class="form-label fw-bold">Presi√≥n Arterial: <span class="text-danger">*</span></label>
                    </div>
                    <div class="col-lg-2 col-md-6 col-sm-12 col-xs-12 me-3 mb-3">
                        {{ form.blood_pressure }}
                    </div>
                    <div class="col-lg-auto col-md-6 col-sm-12 col-xs-12 me-2">
                        <label for="" class="form-label fw-bold">Temperatura: <span class="text-danger">*</span></label>
                    </div>
                    <div class="col-lg-2 col-md-6 col-sm-12 col-xs-12 me-3 mb-3">
                        {{ form.temperature }}
                    </div>
                    <div class="col-lg-auto col-md-6 col-sm-12 col-xs-12 me-2">
                        <label for="" class="form-label fw-bold">Frecuencia Cardiaca: <span class="text-danger">*</span></label>
                    </div>
                    <div class="col-lg-2 col-md-6 col-sm-12 col-xs-12 me-3 mb-3">
                        {{ form.heart_Rate }}
                    </div>
                </div>
                <div class="row g-0 align-items-center justify-content-center">
                    <div class="col-lg-1 col-md-6 col-sm-12 col-xs-12 me-0">
                        <label for="" class="form-label fw-bold">Peso(kg): <span class="text-danger">*</span></label>
                    </div>
                    <div class="col-lg-2 col-md-6 col-sm-12 col-xs-12 me-3 mb-3">
                        {{ form.weight }}
                    </div>
                    <div class="col-lg-1 col-md-6 col-sm-12 col-xs-12 me-0">
                        <label for="" class="form-label fw-bold">Talla(m): <span class="text-danger">*</span></label>
                    </div>
                    <div class="col-lg-2 col-md-6 col-sm-12 col-xs-12 me-3 mb-3">
                        {{ form.height }}
                    </div>
                    <div class="col-lg-1 col-md-6 col-sm-12 col-xs-12 me-0">
                        <label for="" class="form-label fw-bold">IMC: <span class="text-danger">*</span></label>
                    </div>
                    <div class="col-lg-2 col-md-6 col-sm-12 col-xs-12 me-3 mb-3">
                        {{ form.body_mass_index }}
                    </div>
                </div>
                <button type="submit" class="mt-3 btn btn-success">Guardar Signos Vitales</button>
            </form>
        </div>
    </div>
</div>

<script>
    $(document).ready(function(){
        $('.patient_select2').select2({
            theme: 'bootstrap-5',
            placeholder: "Selecciona un paciente"
        });

        $('#id_heart_Rate').addClass('inferior-superior-level')
        $('#id_height').addClass('good-level')
    })
    function calcIMC() {
        let weight = $('#id_weight').val();
        let height = $('#id_height').val();
        let IMC = $('#id_body_mass_index');

        let finalIMC = weight/(height)**2

        return IMC.val(finalIMC.toFixed(2))
    }

    function temperatureLevel(){
        let temperature = parseFloat($('#id_temperature').val());
        if (temperature >= 36.5 && temperature <= 37){
            $('#id_temperature').removeClass('inferior-superior-level')
            $('#id_temperature').addClass('good-level')
        } else{
            $('#id_temperature').removeClass('good-level')
            $('#id_temperature').addClass('inferior-superior-level')
        }
    }
</script>

{% endblock content %}